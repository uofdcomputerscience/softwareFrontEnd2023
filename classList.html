<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Class List</title>
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <link rel="stylesheet" media="screen" href="index.css">
</head>

<body>
  <nav>
    <img src="UDLogo.png" alt="UD Logo" width="80" height="79">
    <img src="UDText.png" alt="UD Text" width="270" height="79">
    <input type="checkbox" id="check">
    <label for="check" class="check-btn">
        <i class="fas fa-bars"></i>
    </label>
    <ul>
      <li><b style="font-size:30px">Attendance - inator</a></li>
      <li><a href="https://uofdcomputerscience.github.io/softwareFrontEnd2023/calendar.html">Calendar</a></li>
      <li><a href="#">Class List</a></li>   <!-- Class List -->

      <li><a href="https://uofdcomputerscience.github.io/softwareFrontEnd2023/index.html">Logout</a></li>
    </ul>
  </nav>
  <section></section>

  
  <!-- particles.js container -->
  <div id="particles-js">
    <button id="btnnxcl">Next Class</button>
    <button id="btnpvcl">Prev Class</button>
    <button id="btnnxd">Next Day</button>
    <button id="btnpvd">Prev Day</button>
    <button id="resetbt">Reset List*</button>
    <h1 id = "title">Class List</h1>
    <p> Attendance Data </p>
    <script src= "https://code.jquery.com/jquery-3.6.3.js"> </script>
    <script>
$.getJSON('attendancenewfinal.json', function(data) {
    var classesNum = 0; 
    var dayNum = 0; 
    var LastDay = Object.keys(data.classes[classesNum].class_days).length;
    var LastClass = Object.keys(data.classes).length; 


    $("#btnnxcl").on("click", function(){
      $('#userdata tbody').empty();

      if (classesNum < LastClass){ 
        classesNum++;
        console.log("it was lesser: " + classesNum);
      }else if (classesNum >= LastClass){
        classesNum = LastClass;
        console.log("it was >=: " + classesNum);
      } else {
        classesNum = 0; 
        console.log("neither restart!: " + classesNum);
      };
      $('#display').html('<p> Name: ' + data.name + '</p>');
      $('#display').append('<p>Class Name: ' + data.classes[classesNum].class_name + '</p>');
      $('#display').append('<p> ID: ' + data.classes[classesNum].class_id + '</p>');
      $('#display').append('<p> Class Day: ' + data.classes[classesNum].class_days[dayNum].classDate.substr(0,10) + '</p>');
      console.log(data.classes[classesNum].class_days[dayNum].attendance[0].name);

      $.each(data.classes[classesNum].class_days[dayNum].attendance, function(i, f) {
            var tblRow = "<tr>" + "<td>" + f.name + "</td>" + "<td>" + f.time.substr(14, 16) + "</td>" + "</tr>"
            $(tblRow).appendTo("#userdata tbody");

      });
    });

    $("#btnpvcl").on("click", function(){
      $('#userdata tbody').empty();

      if (classesNum > 0){
        classesNum--; 
        console.log("its not zero yet!: " + classesNum);
      } else if(classesNum <= 0){
        classesNum = 0;
        console.log("it is <= 0!: " + classesNum);
      } else {
        classesNum = 0;
        console.log("something went wrong....um!!! restart" + classesNum);
      };
        $('#display').html('<p> Name: ' + data.name + '</p>');
        $('#display').append('<p>Class Name: ' + data.classes[classesNum].class_name + '</p>');
        $('#display').append('<p> ID: ' + data.classes[classesNum].class_id + '</p>');
        $('#display').append('<p> Class Day: ' + data.classes[classesNum].class_days[dayNum].classDate.substr(0,10) + '</p>');
        console.log(data.classes[classesNum].class_days[dayNum].attendance[0].name);

        $.each(data.classes[classesNum].class_days[dayNum].attendance, function(i, f) {
              var tblRow = "<tr>" + "<td>" + f.name + "</td>" + "<td>" + f.time.substr(14, 16) + "</td>" + "</tr>"
              $(tblRow).appendTo("#userdata tbody");

        });
    });

      $("#btnnxd").on("click", function(){
        $('#userdata tbody').empty();

        if(dayNum < LastDay){
          dayNum++;
          console.log("it was lesser: " + dayNum);
        } else if ( dayNum >= LastDay){
          dayNum = 0; 
          console.log("it is <= 0!: " + dayNum);
        } else {
          dayNum = 0;
          console.log("somethings off with day index, heres the value: "+dayNum);

        };
        $('#display').html('<p> Name: ' + data.name + '</p>');
        $('#display').append('<p>Class Name: ' + data.classes[classesNum].class_name + '</p>');
        $('#display').append('<p> ID: ' + data.classes[classesNum].class_id + '</p>');
        $('#display').append('<p> Class Day: ' + data.classes[classesNum].class_days[dayNum].classDate.substr(0,10) + '</p>');
        console.log(data.classes[classesNum].class_days[dayNum].attendance[0].name);

        $.each(data.classes[classesNum].class_days[dayNum].attendance, function(i, f) {
              var tblRow = "<tr>" + "<td>" + f.name + "</td>" + "<td>" + f.time.substr(14, 16) + "</td>" + "</tr>"
              $(tblRow).appendTo("#userdata tbody");

        });
      });

      $("#btnpvd").on("click", function(){
        $('#userdata tbody').empty();

          if (dayNum > 0){
           return dayNum--; 
            console.log("its not zero yet!: " + dayNum);
          } else if(dayNum <= 0){
            dayNum = 0;
            console.log("it is <= 0!: " + dayNum);
          } else {
            dayNum = 0;
            console.log("something went wrong....um!!! restart" + dayNum);
        };
        $('#display').html('<p> Name: ' + data.name + '</p>');
        $('#display').append('<p>Class Name: ' + data.classes[classesNum].class_name + '</p>');
        $('#display').append('<p> ID: ' + data.classes[classesNum].class_id + '</p>');
        $('#display').append('<p> Class Day: ' + data.classes[classesNum].class_days[dayNum].classDate.substr(0,10) + '</p>');
        console.log(data.classes[classesNum].class_days[dayNum].attendance[0].name);

        $.each(data.classes[classesNum].class_days[dayNum].attendance, function(i, f) {
              var tblRow = "<tr>" + "<td>" + f.name + "</td>" + "<td>" + f.time.substr(14, 16) + "</td>" + "</tr>"
              $(tblRow).appendTo("#userdata tbody");

        });
      });

      $("#resetbt").on("click", function(){
        $('#userdata tbody').empty();
        $('#display h2').empty();


      });
    });


   /*  console.log(LastDay);
    console.log(LastClass);
    console.log(data.classes[classesNum].class_name);
    console.log(data.classes[classesNum].class_days[dayNum].classDate);

    


    console.log("hello there!"); */
    


  
  </script>
        <h2 id="display" style="background-color:#ffffffc9;"></h2>
  
        <table id= "userdata" border="2">

          <thead>

            <th>Students attended today</th>
            <th>Time of Arrival</th>
                </thead>
              <tbody>
        
               </tbody>
           </table>                         
  </div>

  <!-- scripts -->
  <script src="particles.js"></script>
  <script src="app.js"></script>

  <!-- stats.js -->
  <script src="js/lib/stats.js"></script>
  <script>
    var count_particles, stats, update;
    stats = new Stats;
    stats.setMode(0);
    stats.domElement.style.position = 'absolute';
    stats.domElement.style.left = '0px';
    stats.domElement.style.top = '0px';
    document.body.appendChild(stats.domElement);
    count_particles = document.querySelector('.js-count-particles');
    update = function () {
      stats.begin();
      stats.end();
      if (window.pJSDom[0].pJS.particles && window.pJSDom[0].pJS.particles.array) {
        count_particles.innerText = window.pJSDom[0].pJS.particles.array.length;
      }
      requestAnimationFrame(update);
    };
    requestAnimationFrame(update);
  </script>



</body>
</html>